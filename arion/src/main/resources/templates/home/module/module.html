<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{common/home/layouts/home_layout}"
      layout:fragment="content">
<head>
    <meta charset="utf-8">
    <title>ARION</title>
    <style>
    /* 스타일 생략 (기존과 동일) */
    </style>
</head>
<body>

<div class="moduleNav">
    <!-- Thymeleaf가 서버 측에서 렌더링한 모듈 링크 -->
    <th:block th:each="module : ${moduleList}">
        <a href="#" class="moduleBtn" th:text="${module.moduleName}" th:data-mod-no="${module.moduleNo}"></a>
    </th:block>
</div>

<div id="moduleInfo">
    <!-- 이 부분은 JavaScript가 동적으로 업데이트합니다 -->
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
$(document).ready(function() {
    // Load modules when document is ready
    function loadModules() {
        $.ajax({
            url: '/modules',
            type: 'GET',
            dataType: 'json',
            success: function(data) {
                renderModules(data);
            },
            error: function(xhr, status, error) {
                console.error('Error:', error);
            }
        });
    }

    // Render modules into HTML
    function renderModules(modules) {
        $('.moduleNav').empty();
        modules.forEach(function(module) {
            let link = $('<a/>')
                .attr('href', '#')
                .addClass('moduleBtn')
                .text(module.moduleName)
                .data('mod-no', module.moduleNo);
            $('.moduleNav').append(link);
        });
    }

    // Load modules when the page loads
    loadModules();
});
</script>
</body>
</html>
